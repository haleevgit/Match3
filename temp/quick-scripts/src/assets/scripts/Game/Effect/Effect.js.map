{"version":3,"sources":["assets/scripts/Game/Effect/Effect.js"],"names":["cc","Class","Component","properties","effect","type","Prefab","onEnable","_handleSubscription","onDisable","isOn","func","systemEvent","GameEvent","SPAWN_EFFECT","onSpawnEffect","coords","g","instantiate","setParent","node","x","y","active"],"mappings":";;;;;;AAAA;;;;AAEAA,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAGLC,UAAU,EAAE;IACRC,MAAM,EAAE;MAAC,WAAS,IAAV;MAAgBC,IAAI,EAAEL,EAAE,CAACM;IAAzB;EADA,CAHP;EAOLC,QAPK,sBAOM;IACP,KAAKC,mBAAL,CAAyB,IAAzB;EACH,CATI;EAWLC,SAXK,uBAWO;IACR,KAAKD,mBAAL,CAAyB,KAAzB;EACH,CAbI;EAeLA,mBAfK,+BAeeE,IAff,EAeqB;IACtB,IAAMC,IAAI,GAAGD,IAAI,GAAG,IAAH,GAAU,KAA3B;IACAV,EAAE,CAACY,WAAH,CAAeD,IAAf,EAAqBE,qBAAA,CAAUC,YAA/B,EAA6C,KAAKC,aAAlD,EAAiE,IAAjE;EACH,CAlBI;EAoBLA,aApBK,yBAoBSC,MApBT,EAoBiB;IAClB,IAAMC,CAAC,GAAGjB,EAAE,CAACkB,WAAH,CAAe,KAAKd,MAApB,CAAV;IACAa,CAAC,CAACE,SAAF,CAAY,KAAKC,IAAjB;IACAH,CAAC,CAACI,CAAF,GAAML,MAAM,CAACK,CAAb;IACAJ,CAAC,CAACK,CAAF,GAAMN,MAAM,CAACM,CAAb;IACAL,CAAC,CAACM,MAAF,GAAW,IAAX;EACH;AA1BI,CAAT","sourceRoot":"/","sourcesContent":["import GameEvent from 'GameEvent';\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        effect: {default: null, type: cc.Prefab},\n    },\n    \n    onEnable() {\n        this._handleSubscription(true);\n    },\n\n    onDisable() {\n        this._handleSubscription(false);\n    },\n\n    _handleSubscription(isOn) {\n        const func = isOn ? 'on' : 'off';\n        cc.systemEvent[func](GameEvent.SPAWN_EFFECT, this.onSpawnEffect, this);\n    },\n\n    onSpawnEffect(coords) {\n        const g = cc.instantiate(this.effect);\n        g.setParent(this.node)\n        g.x = coords.x;\n        g.y = coords.y;\n        g.active = true;\n    }\n\n});\n"]}