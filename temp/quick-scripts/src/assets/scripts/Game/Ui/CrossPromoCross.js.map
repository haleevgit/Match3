{"version":3,"sources":["assets/scripts/Game/Ui/CrossPromoCross.js"],"names":["cc","Class","Component","properties","_inputCatcher","serializable","onEnable","window","AD_TYPE","node","active","IS_END_CARD","_hadleSubscription","getComponent","enabled","opacity","scheduleOnce","_enableCross","isOn","func","systemEvent","GameEvent","FIRST_TAP","onFirstTap"],"mappings":";;;;;;AAAA;;;;AACA;AACA;AAEAA,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAGLC,UAAU,EAAE;IACR;IACA;IAEA;IACA;IAEA;IACAC,aAAa,EAAE;MACX,WAAS,IADE;MAEXC,YAAY,EAAE;IAFH,CARP,CAYR;;EAZQ,CAHP;EAkBL;EACAC,QAnBK,sBAmBM;IAAA;;IACP,IAAIC,MAAM,CAACC,OAAP,KAAmB,aAAvB,EAAsC;MAClC,KAAKC,IAAL,CAAUC,MAAV,GAAmB,KAAnB;IACH,CAFD,MAEO;MACH,IAAI,CAACH,MAAM,CAACI,WAAZ,EAAyB;QACrB,KAAKC,kBAAL,CAAwB,IAAxB;;QAEA,KAAKR,aAAL,GAAqB,KAAKS,YAAL,CAAkB,cAAlB,CAArB;QACA,KAAKT,aAAL,CAAmBU,OAAnB,GAA6B,KAA7B;QAEA,KAAKL,IAAL,CAAUM,OAAV,GAAoB,CAApB;QAEA,KAAKC,YAAL,CAAkB,YAAM;UACpB,KAAI,CAACC,YAAL;QACH,CAFD,EAEG,CAFH;MAGH;IACJ;EACJ,CApCI;EAqCL;EAEA;EACA;EAEA;EACAL,kBA3CK,8BA2CcM,IA3Cd,EA2CoB;IACrB,IAAMC,IAAI,GAAGD,IAAI,GAAG,IAAH,GAAU,KAA3B;IAEAlB,EAAE,CAACoB,WAAH,CAAeD,IAAf,EAAqBE,qBAAA,CAAUC,SAA/B,EAA0C,KAAKC,UAA/C,EAA2D,IAA3D;EACH,CA/CI;EAiDLN,YAjDK,0BAiDU;IACX,IAAI,KAAKR,IAAL,CAAUM,OAAV,KAAsB,CAAtB,IAA2B,CAAC,KAAKX,aAAL,CAAmBU,OAAnD,EAA4D;MACxD,KAAKL,IAAL,CAAUM,OAAV,GAAoB,GAApB;MACA,KAAKX,aAAL,CAAmBU,OAAnB,GAA6B,IAA7B;IACH;EACJ,CAtDI;EAuDL;EAEA;EACAS,UA1DK,wBA0DQ;IACT,KAAKN,YAAL;EACH,CA5DI,CA6DL;;AA7DK,CAAT","sourceRoot":"/","sourcesContent":["import GameEvent from 'GameEvent';\n//#region classes-helpers\n//#endregion\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        //#region editors fields and properties\n        //#endregion\n\n        //#region public fields and properties\n        //#endregion\n\n        //#region private fields and properties\n        _inputCatcher: {\n            default: null,\n            serializable: false,\n        },\n        //#endregion\n    },\n\n    //#region life-cycle callbacks\n    onEnable() {\n        if (window.AD_TYPE !== 'cross-promo') {\n            this.node.active = false;\n        } else {\n            if (!window.IS_END_CARD) {\n                this._hadleSubscription(true);\n\n                this._inputCatcher = this.getComponent('InputCatcher');\n                this._inputCatcher.enabled = false;\n\n                this.node.opacity = 0;\n\n                this.scheduleOnce(() => {\n                    this._enableCross();\n                }, 4);\n            }\n        }\n    },\n    //#endregion\n\n    //#region public methods\n    //#endregion\n\n    //#region private methods\n    _hadleSubscription(isOn) {\n        const func = isOn ? 'on' : 'off';\n\n        cc.systemEvent[func](GameEvent.FIRST_TAP, this.onFirstTap, this);\n    },\n\n    _enableCross() {\n        if (this.node.opacity === 0 && !this._inputCatcher.enabled) {\n            this.node.opacity = 255;\n            this._inputCatcher.enabled = true;\n        }\n    },\n    //#endregion\n\n    //#region event handlers\n    onFirstTap() {\n        this._enableCross();\n    },\n    //#endregion\n});\n"]}